# 插入排序

# 一、最好情况
输入是一个递增序列，例如`{1,2,3,4,5}`
|待插入数字|比较次数|
|---|---|
|`1`|不需要比较|
|`2`|只需要与`1`比较一次，就能找到自己的位置|
|`3`|只需要与`2`比较一次，就能找到自己的位置|
|`4`|只需要与`3`比较一次，就能找到自己的位置|
|`5`|只需要与`4`比较一次，就能找到自己的位置|
|**合计**|n-1|

# 二、最差情况
输入是一个递减序列，例如`{5,4,3,2,1}`
|待插入数字|比较次数|
|---|---|
|`5`|不需要比较|
|`4`|依次与`{5}`比较，找到自己的位置|
|`3`|依次与`{5,4}`比较，找到自己的位置|
|`2`|依次与`{5,4,3}`比较，找到自己的位置|
|`1`|依次与`{5,4,3,2}`比较，找到自己的位置|
|**合计**|$1+2+...+(n-1) = \frac {n(n-1)} 2 = \Theta(n^2)$|

# 三、平均情况

## 3.1 平均比较次数

假设现在前k-1个数已经排序，我们来插入第k个数，根据其最终停留的位置，来计算相应的比较次数
|停留位置|比较次数|停留在该位置的概率|
|---|---|---|
|k|说明只与`A[k-1]`比较一次，就找到位置<br>比较次数：`1`|$\frac 1 k$|
|k-1|说明依次与`{A[k-1], A[k-2]}`比较后，找到位置<br>比较次数：`2`|$\frac 1 k$|
|...|||
|2|说明依次与`{A[k-1], A[k-2], ... A[1]}`比较后，找到位置<br>比较次数：`k-1`|$\frac 1 k$|
|1|说明依次与`{A[k-1], A[k-2], ... A[1]}`比较后，找到位置<br>比较次数：`k-1`<br>为了简化计算，视作`k`|$\frac 1 k$|

因此平均比较次数为：
$$
\frac 1 k \sum\limits_{j=1}^k j = \frac 1 k \frac {k(k+1)} 2 = \frac {k+1} 2
$$

## 3.2 平均复杂度

将上面的**平均比较次数**汇总:
$$
\sum\limits_{k=2}^n \frac {k+1} 2 = \frac {n^2 + 3n -4} 4 = \Theta(n^2)
$$
